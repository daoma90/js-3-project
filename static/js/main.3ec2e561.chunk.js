(this["webpackJsonpjs-3-project"]=this["webpackJsonpjs-3-project"]||[]).push([[0],{30:function(e,t,n){e.exports=n(44)},35:function(e,t,n){},36:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(24),u=n.n(c),i=(n(35),n(2)),l=n(3),o=(n(36),n(1)),s=n.n(o),m=n(7),f=n(25),d=n(26),p="https://frebi.willandskill.eu/",h=function(){function e(){Object(f.a)(this,e)}return Object(d.a)(e,[{key:"register",value:function(){var e=Object(m.a)(s.a.mark((function e(t,n,r,a,c,u){var i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(p,"auth/users/"),l={firstName:t,lastName:n,email:r,password:a,organisationName:c,organisationKind:u},e.abrupt("return",fetch(i,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(l)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c,u){return e.apply(this,arguments)}}()},{key:"activateUser",value:function(){var e=Object(m.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(p,"auth/users/activate/"),a={uid:t,token:n},e.abrupt("return",fetch(r,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(a)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(m.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(p,"api-token-auth/"),a={email:t,password:n},e.abrupt("return",fetch(r,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(a)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCustomerList",value:function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(p,"api/v1/customers"),e.abrupt("return",fetch(t,{method:"GET",headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomer",value:function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(p,"api/v1/customers/").concat(t,"/"),e.abrupt("return",fetch(n,{method:"GET",headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addCustomer",value:function(){var e=Object(m.a)(s.a.mark((function e(t,n,r,a,c,u,i,l){var o,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(p,"api/v1/customers"),m={name:t,organisationNr:n,vatNr:r,reference:a,paymentTerm:c,website:u,email:i,phoneNumber:l},e.abrupt("return",fetch(o,{method:"POST",headers:this.getPrivateHeaders(),body:JSON.stringify(m)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c,u,i,l){return e.apply(this,arguments)}}()},{key:"editCustomer",value:function(){var e=Object(m.a)(s.a.mark((function e(t,n,r,a,c,u,i,l,o){var m,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m="".concat(p,"api/v1/customers/").concat(t,"/"),f={id:t,name:n,organisationNr:r,vatNr:a,reference:c,paymentTerm:u,website:i,email:l,phoneNumber:o},e.abrupt("return",fetch(m,{method:"PATCH",headers:this.getPrivateHeaders(),body:JSON.stringify(f)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c,u,i,l,o){return e.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(p,"api/v1/customers/").concat(t,"/"),e.abrupt("return",fetch(n,{method:"DELETE",headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(p,"api/v1/me"),e.abrupt("return",fetch(t,{method:"GET",headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setToken",value:function(e){localStorage.setItem("BUSINESS_TOKEN",e)}},{key:"getToken",value:function(){return localStorage.getItem("BUSINESS_TOKEN")}},{key:"getPublicHeaders",value:function(){return{"Content-Type":"application/json"}}},{key:"getPrivateHeaders",value:function(){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getToken())}}}]),e}(),b=n(4),E=n(5);function v(){var e=Object(b.a)(["\n  color: ",";\n  align-self: flex-start;\n"]);return v=function(){return e},e}function g(){var e=Object(b.a)(["\n  appearance: none;\n  outline: none;\n  -webkit-appearance: none;\n  width: 500px;\n  padding: 16px 12px 0 12px;\n  border: none;\n  height: 56px;\n  font-size: 16px;\n  font-weight: 400;\n  background: ",";\n  border-bottom: 1px solid ",";\n  color: ",";\n  outline-width: 0;\n  &:focus {\n    border-bottom: 1px solid white;\n  }\n"]);return g=function(){return e},e}function O(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return O=function(){return e},e}function j(){var e=Object(b.a)(["\n  flex-direction: row;\n  background-color: white;\n  justify-content: space-around;\n  width: 100%;\n  padding: 0;\n"]);return j=function(){return e},e}function w(){var e=Object(b.a)(["\n  padding: 5px;\n"]);return w=function(){return e},e}function y(){var e=Object(b.a)(["\n  padding: 10px;\n  margin: 10px;\n  border-bottom: 1px solid black;\n"]);return y=function(){return e},e}function x(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  border: 1px solid ",";\n  color: ",";\n  padding: 20px;\n  margin: 5px;\n  border-radius: 5px;\n  width: 500px;\n  &:hover {\n    border-color: #32adad;\n    transition: 0.1s;\n  }\n"]);return x=function(){return e},e}function N(){var e=Object(b.a)(["\n  background-color: white;\n"]);return N=function(){return e},e}function k(){var e=Object(b.a)(["\n  width: 500px;\n"]);return k=function(){return e},e}function T(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  padding: 50px;\n  width: auto;\n  border-radius: 10px;\n"]);return T=function(){return e},e}function S(){var e=Object(b.a)(["\n  margin-bottom: 10px;\n  color: ",";\n"]);return S=function(){return e},e}function C(){var e=Object(b.a)(["\n  margin-bottom: 10px;\n  color: ",";\n"]);return C=function(){return e},e}function q(){var e=Object(b.a)(["\n  justify-content: space-between;\n"]);return q=function(){return e},e}function P(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return P=function(){return e},e}function L(){var e=Object(b.a)(["\n  height: 50px;\n  margin-right: 20px;\n  color: ",";\n"]);return L=function(){return e},e}function H(){var e=Object(b.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: ",";\n  height: 80px;\n  width: 100vw;\n  max-width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return H=function(){return e},e}function I(){var e=Object(b.a)(["\n  background: ",";\n  color: white;\n  font-size: 25px;\n  padding: 0px 30px;\n  border: 2px solid ",";\n  border-radius: 6px;\n  height: 50px;\n  margin-top: 20px;\n  width: 100%;\n  &:hover {\n    cursor: pointer;\n  }\n"]);return I=function(){return e},e}function U(){var e=Object(b.a)(["\n  margin-top: 20px;\n  width: 100%;\n  background-color: ",";\n  border-color: ",";\n"]);return U=function(){return e},e}function A(){var e=Object(b.a)(["\n  margin-left: 20px;\n"]);return A=function(){return e},e}function J(){var e=Object(b.a)(["\n  background: ",";\n  color: white;\n  font-size: 25px;\n  padding: 0px 30px;\n  border: 2px solid ",";\n  border-radius: 6px;\n  height: 50px;\n  &:hover {\n    cursor: pointer;\n  }\n"]);return J=function(){return e},e}var V=E.a.button(J(),"#55bcc9","#55bcc9"),R=Object(E.a)(V)(A()),M=Object(E.a)(V)(U(),(function(e){return e.warning?"".concat("#fc4445"):"".concat("#55bcc9")}),(function(e){return e.warning?"".concat("#fc4445"):"".concat("#55bcc9")})),z=E.a.input(I(),"#55bcc9","#55bcc9"),B=E.a.nav(H(),"#cafafe"),K=E.a.div(L(),"#55bcc9"),D=E.a.div(P()),G=Object(E.a)(D)(q()),W=E.a.h2(C(),"#55bcc9"),_=E.a.p(S(),"#55bcc9"),F=E.a.div(T(),"#cafafe"),Q=Object(E.a)(F)(k()),X=Object(E.a)(F)(N()),Y=E.a.div(x(),"#cafafe","#cafafe","#55bcc9"),Z=E.a.div(y()),$=E.a.p(w()),ee=Object(E.a)(F)(j()),te=E.a.form(O()),ne=E.a.input(g(),"#cafafe","#55bcc9","#55bcc9"),re=E.a.p(v(),"#fc4445");function ae(){var e=new h,t=Object(r.useState)(""),n=Object(i.a)(t,2),c=n[0],u=n[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),m=s[0],f=s[1],d=Object(l.f)(),p=d.location.search,b=new URLSearchParams(p),E=Object(r.useState)(b.get("uid")),v=Object(i.a)(E,2),g=v[0],O=v[1],j=Object(r.useState)(b.get("token")),w=Object(i.a)(j,2),y=w[0],x=w[1];return a.a.createElement("div",null,g&&y?a.a.createElement(F,null,a.a.createElement(W,null,"Activate Account"),a.a.createElement(M,{onClick:function(){e.activateUser(g,y).then((function(){O(null),x(null),d.push("/login")}))}},"Activate User")):a.a.createElement(F,null,a.a.createElement(W,null,"Login"),a.a.createElement(ne,{placeholder:"Email",value:c,onChange:function(e){return u(e.target.value)}}),a.a.createElement(ne,{placeholder:"Password",type:"password",value:m,onChange:function(e){return f(e.target.value)}}),a.a.createElement(M,{onClick:function(){e.login(c,m).then((function(e){return e.json()})).then((function(t){console.log(t.token),e.setToken(t.token),d.push("/home")}))}},"Login")))}function ce(){return a.a.createElement(ae,null)}var ue=n(18),ie=Object(r.createContext)({});function le(){var e=new h,t=Object(r.useContext)(ie).getCustomerList,n=Object(ue.a)(),c=n.register,u=n.handleSubmit,i=n.errors;return a.a.createElement(F,null,a.a.createElement(te,{onSubmit:u((function(n,r){e.addCustomer(n.name,n.orgNr,n.vatNr,n.reference,n.payTerm,n.website,n.email,n.phone).then((function(e){e.ok&&t()})),r.target.reset()}))},a.a.createElement(W,null,"Add New Customer"),a.a.createElement(ne,{name:"name",placeholder:"Company Name",ref:c({required:!0,minLength:2})}),i.name&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"orgNr",placeholder:"Organisation Number",ref:c({required:!0})}),i.orgNr&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"vatNr",placeholder:"Vat Number",ref:c({required:!0,pattern:{value:/[Ss]{1}[Ee]{1}[0-9]{10}/},message:"Vat number must start with SE followed by 10 digits"})}),i.vatNr&&a.a.createElement(re,null,"Vat number must start with SE followed by 10 digits"),a.a.createElement(ne,{name:"reference",placeholder:"Reference",ref:c({required:!0})}),i.reference&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"payTerm",placeholder:"Payment Term",ref:c({required:!0,pattern:{value:/[0-9]/}})}),i.payTerm&&a.a.createElement(re,null,"This field is required and must be a number"),a.a.createElement(ne,{name:"website",placeholder:"Website",ref:c({required:!0})}),i.website&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"email",placeholder:"Email",ref:c({required:!0})}),i.email&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"phone",placeholder:"Phone Number",ref:c({required:!0})}),i.phone&&a.a.createElement(re,null,"This field is required"),a.a.createElement(z,{type:"submit",value:"Add Customer"})))}var oe=n(11);function se(){var e=Object(r.useContext)(ie),t=e.customerList,n=e.getCustomerList;return Object(r.useEffect)((function(){n()}),[]),t.length>0?a.a.createElement(X,null,a.a.createElement(W,null,"Customers"),t.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(oe.b,{to:"/home/".concat(e.id),style:{textDecoration:"none"}},a.a.createElement(Y,null,a.a.createElement(G,null,a.a.createElement($,null,e.name),a.a.createElement($,null,e.organisationNr)),a.a.createElement($,null,e.reference))))}))):a.a.createElement(X,null,a.a.createElement(W,null,"Customers"),a.a.createElement("p",null,"No customers"))}function me(){return a.a.createElement(ee,null,a.a.createElement(le,null),a.a.createElement(se,null))}function fe(){var e=new h,t=Object(r.useState)(""),n=Object(i.a)(t,2),c=n[0],u=n[1],l=Object(r.useState)(""),o=Object(i.a)(l,2),s=o[0],m=o[1],f=Object(r.useState)(""),d=Object(i.a)(f,2),p=d[0],b=d[1],E=Object(r.useState)(""),v=Object(i.a)(E,2),g=v[0],O=v[1],j=Object(r.useState)(""),w=Object(i.a)(j,2),y=w[0],x=w[1],N=Object(r.useState)(""),k=Object(i.a)(N,2),T=k[0],S=k[1],C=[["FirstName",c,u],["LastName",s,m],["Email",p,b],["Password",g,O],["Organisation Name",y,x],["Organisation Kind (0, 1, 2)",T,S]];return a.a.createElement(F,null,a.a.createElement(W,null,"Register"),a.a.createElement(_,null,"Enter details to register"),C.map((function(e,t){return function(e,t,n,r){return"Password"===e?a.a.createElement("div",{key:r},a.a.createElement(ne,{placeholder:e,value:t,type:"password",onChange:function(e){return n(e.target.value)}})):a.a.createElement("div",{key:r},a.a.createElement(ne,{placeholder:e,value:t,onChange:function(e){return n(e.target.value)}}))}(e[0],e[1],e[2],t)})),a.a.createElement(M,{onClick:function(){e.register(c,s,p,g,y,T)}},"Register"))}function de(){return a.a.createElement(fe,null)}function pe(e){var t=e.children,n=new h,c=Object(l.f)(),u=Object(r.useContext)(ie),i=u.userInfo,o=u.setUserInfo;Object(r.useEffect)((function(){n.getUserInfo().then((function(e){return e.json()})).then((function(e){o(e)}))}),[]);return a.a.createElement("div",{className:"hello"},a.a.createElement(B,null,a.a.createElement(R,{onClick:function(){c.push("/home")}},"Home"),a.a.createElement(K,null,a.a.createElement(D,null,a.a.createElement("p",{className:"userInfo-first"},i.firstName),a.a.createElement("p",null,i.lastName)),a.a.createElement("p",null,i.email))),t)}function he(e){var t=e.setEditMode,n=new h,c=Object(r.useState)([]),u=Object(i.a)(c,2),o=u[0],s=u[1],m=Object(l.g)().id;return Object(r.useEffect)((function(){n.getCustomer(m).then((function(e){return e.json()})).then((function(e){s(e)}))}),[]),a.a.createElement("div",null,a.a.createElement(W,null,o.name),a.a.createElement(Z,null,a.a.createElement(_,null,"Organisation number"),a.a.createElement("p",null,o.organisationNr)),a.a.createElement(Z,null,a.a.createElement(_,null,"Vat number"),a.a.createElement("p",null,o.vatNr)),a.a.createElement(Z,null,a.a.createElement(_,null,"Reference"),a.a.createElement("p",null,o.reference)),a.a.createElement(Z,null,a.a.createElement(_,null,"Payment term"),a.a.createElement("p",null,o.paymentTerm)),a.a.createElement(Z,null,a.a.createElement(_,null,"Website"),a.a.createElement("p",null,o.website)),a.a.createElement(Z,null,a.a.createElement(_,null,"Email"),a.a.createElement("p",null,o.email)),a.a.createElement(Z,null,a.a.createElement(_,null,"Phone number"),a.a.createElement("p",null,o.phoneNumber)),a.a.createElement(M,{onClick:function(){return t(!0)}},"Edit"))}function be(e){var t=e.setEditMode,n=new h,c=Object(r.useState)([]),u=Object(i.a)(c,2),o=u[0],s=u[1],m=Object(l.g)().id;Object(r.useEffect)((function(){n.getCustomer(m).then((function(e){return e.json()})).then((function(e){s(e)}))}),[]),Object(r.useEffect)((function(){o&&v({name:o.name,orgNr:o.organisationNr,vatNr:o.vatNr,reference:o.reference,payTerm:o.paymentTerm,website:o.website,email:o.email,phone:o.phoneNumber})}),[o]);var f=Object(l.f)(),d=Object(ue.a)(),p=d.register,b=d.handleSubmit,E=d.errors,v=d.reset;return a.a.createElement(te,{onSubmit:b((function(e,r){n.editCustomer(o.id,e.name,e.orgNr,e.vatNr,e.reference,e.payTerm,e.website,e.email,e.phone).then((function(e){e.ok&&(t(!1),f.push("/home"))}))}))},a.a.createElement(W,null,"Edit Customer"),a.a.createElement(ne,{name:"name",placeholder:"Company Name",ref:p({required:!0,minLength:2})}),E.name&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"orgNr",placeholder:"Organisation Number",ref:p({required:!0})}),E.orgNr&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"vatNr",placeholder:"Vat Number",ref:p({required:!0,pattern:{value:/[Ss]{1}[Ee]{1}[0-9]{10}/},message:"Vat number must start with SE followed by 10 digits"})}),E.vatNr&&a.a.createElement(re,null,"Vat number must start with SE followed by 10 digits"),a.a.createElement(ne,{name:"reference",placeholder:"Reference",ref:p({required:!0})}),E.reference&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"payTerm",placeholder:"Payment Term",ref:p({required:!0,pattern:{value:/[0-9]/}})}),E.payTerm&&a.a.createElement(re,null,"This field is required and must be a number"),E.payTerm&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"website",placeholder:"Website",ref:p({required:!0})}),E.website&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"email",placeholder:"Email",ref:p({required:!0})}),E.email&&a.a.createElement(re,null,"This field is required"),a.a.createElement(ne,{name:"phone",placeholder:"Phone Number",ref:p({required:!0})}),E.phone&&a.a.createElement(re,null,"This field is required"),a.a.createElement(z,{type:"submit",value:"Save"}))}function Ee(e){var t=new h,n=Object(l.f)(),c=Object(r.useState)(!1),u=Object(i.a)(c,2),o=u[0],s=u[1],m=e.match.params.id;return a.a.createElement(Q,null,o?a.a.createElement(be,{setEditMode:s}):a.a.createElement(he,{setEditMode:s}),a.a.createElement(M,{warning:!0,onClick:function(){t.deleteCustomer(m),n.push("/home")}},"Delete"))}var ve=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)({}),o=Object(i.a)(u,2),s=o[0],m=o[1],f=new h;return a.a.createElement("div",{className:"App"},a.a.createElement(ie.Provider,{value:{userInfo:s,setUserInfo:m,customerList:n,setCustomerList:c,getCustomerList:function(){f.getCustomerList().then((function(e){return e.json()})).then((function(e){c(e.results)}))}}},a.a.createElement(l.c,null,a.a.createElement(l.a,{path:"/home/:id",render:function(e){return a.a.createElement(pe,null,a.a.createElement(Ee,e))}}),a.a.createElement(l.a,{path:"/home"},a.a.createElement(pe,null,a.a.createElement(me,null))),a.a.createElement(l.a,{path:"/login"},a.a.createElement(ce,null)),a.a.createElement(l.a,null,a.a.createElement(de,null)))))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(oe.a,null,a.a.createElement(ve,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.3ec2e561.chunk.js.map